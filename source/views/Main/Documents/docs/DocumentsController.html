 <!-- generated from template for documentscontroller.js -->      <section class="file">   <header>     <span class="title">DocumentsController.js</span>     <span class="path">source/controllers/DocumentsController.js</span>   </header>             <section class="group">       <section class="comments">                </section>       <section class="source">         <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    
    <span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="s2">&quot;source/views/Main/Documents/docs/%..html&quot;</span><span class="p">,</span> <span class="nx">documents</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;App&quot;</span><span class="p">,</span> <span class="s2">&quot;ApplicationController&quot;</span><span class="p">,</span> <span class="s2">&quot;Core&quot;</span><span class="p">,</span> <span class="s2">&quot;Divider&quot;</span><span class="p">,</span> <span class="s2">&quot;Documents&quot;</span><span class="p">,</span>
        <span class="s2">&quot;DocumentsController&quot;</span><span class="p">,</span> <span class="s2">&quot;Editor&quot;</span><span class="p">,</span> <span class="s2">&quot;EditorController&quot;</span><span class="p">,</span>
        <span class="s2">&quot;FitToTargetBoundsLayout&quot;</span><span class="p">,</span> <span class="s2">&quot;Main&quot;</span><span class="p">,</span> <span class="s2">&quot;Roller&quot;</span><span class="p">,</span> <span class="s2">&quot;RollerCollection&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RollerLayout&quot;</span><span class="p">,</span> <span class="s2">&quot;RollerModel&quot;</span><span class="p">,</span> <span class="s2">&quot;RollerPanel&quot;</span><span class="p">,</span> <span class="s2">&quot;Scaffold&quot;</span><span class="p">,</span> <span class="s2">&quot;Toolbar&quot;</span>
    <span class="p">],</span> <span class="nx">loadDocs</span><span class="p">,</span> <span class="nx">loadDoc</span><span class="p">;</span>
    
    <span class="nx">enyo</span><span class="p">.</span><span class="nx">kind</span><span class="p">({</span>
        <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Mvc.DocumentsController&quot;</span><span class="p">,</span>
        <span class="nx">kind</span><span class="o">:</span> <span class="s2">&quot;enyo.ArrayController&quot;</span><span class="p">,</span>
        <span class="kr">public</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">selected</span><span class="o">:</span> <span class="mi">0</span>
        <span class="p">},</span>
        <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">inherited</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="nx">loadDocs</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">loadedDoc</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">src</span><span class="o">:</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="nx">content</span><span class="p">,</span> <span class="nx">index</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">});</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">selectSource</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">sender</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;selectSource&quot;</span><span class="p">,</span> <span class="nx">sender</span><span class="p">.</span><span class="nx">index</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">,</span> <span class="nx">sender</span><span class="p">.</span><span class="nx">index</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
    
    </pre></div>       </section>     </section>             <section class="group">       <section class="comments">         <p>Eventually general support for something like this may be
added but for now we're just loading these adhoc to make
their content available to our views</p>       </section>       <section class="source">         <div class="highlight"><pre>    <span class="nx">loadDocs</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">loaded</span> <span class="o">=</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">target</span><span class="p">.</span><span class="nx">loadedDoc</span><span class="p">);</span>
        <span class="nx">enyo</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">documents</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
           <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">doc</span><span class="p">);</span>
           <span class="nx">loadDoc</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">loaded</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">};</span>
    
    <span class="nx">loadDoc</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">loaded</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">enyo</span><span class="p">.</span><span class="nx">Ajax</span><span class="p">({</span><span class="nx">url</span><span class="o">:</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">handleAs</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">});</span>
        <span class="nx">xhr</span><span class="p">.</span><span class="nx">response</span><span class="p">(</span><span class="nx">loaded</span><span class="p">).</span><span class="nx">go</span><span class="p">();</span>
    <span class="p">};</span>
    
<span class="p">}());</span>

</pre></div>       </section>     </section>    </section>